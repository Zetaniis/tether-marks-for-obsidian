/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => VimMarksImpl
});
module.exports = __toCommonJS(main_exports);
var import_obsidian3 = require("obsidian");

// src/ui/MarkListModal.ts
var import_obsidian = require("obsidian");
var MarkListModal = class extends import_obsidian.SuggestModal {
  constructor(app, plugin, mode) {
    super(app);
    this.plugin = plugin;
    this.mode = mode;
    this.marks = plugin.marks;
    this.setPlaceholder(this.mode === "set" ? "Select a mark to set" : "Select a mark to go to");
  }
  getSuggestions(query) {
    return this.marks;
  }
  renderSuggestion(mark, el) {
    el.createEl("div", { text: `${mark.letter}: ${mark.filePath}` });
    if (/^[A-Z]$/i.test(mark.letter)) {
      el.addEventListener("click", async (evt) => {
        await this.onChooseSuggestion(mark, evt);
        this.close();
      });
    }
  }
  async onChooseSuggestion(mark, evt) {
    if (this.mode === "set") {
      const file = this.app.workspace.getActiveFile();
      if (!file) {
        new import_obsidian.Notice("No active file to mark.");
        return;
      }
      const marks = this.plugin.marks.filter((m) => m.letter !== mark.letter);
      marks.push({ letter: mark.letter, filePath: file.path });
      await this.plugin.saveMarks(marks);
      new import_obsidian.Notice(`Set mark '${mark.letter}' to ${file.name}`);
    } else if (this.mode === "goto") {
      const file = this.app.vault.getAbstractFileByPath(mark.filePath);
      if (file instanceof import_obsidian.TFile) {
        const leaves = this.app.workspace.getLeavesOfType("markdown");
        for (const leaf of leaves) {
          const view = leaf.view;
          if (view instanceof import_obsidian.MarkdownView && view.file && view.file.path === mark.filePath) {
            this.app.workspace.setActiveLeaf(leaf, true, true);
            return;
          }
        }
        if (this.plugin.settings.openMarkInNewTab) {
          this.app.workspace.getLeaf("tab").openFile(file);
        } else {
          this.app.workspace.getLeaf().openFile(file);
        }
      } else {
        new import_obsidian.Notice(`File not found for mark '${mark.letter}'`);
      }
    }
  }
  // Override to hide the input box
  onOpen() {
    super.onOpen();
    if (this.inputEl) {
      this.inputEl.style.display = "none";
    }
    const upKey = this.plugin.settings.markListUp || "ctrl+p";
    const downKey = this.plugin.settings.markListDown || "ctrl+n";
    this._keyHandler = async (evt) => {
      if (this.matchKeybind(evt, upKey)) {
        evt.preventDefault();
        this.moveSelection(-1);
      } else if (this.matchKeybind(evt, downKey)) {
        evt.preventDefault();
        this.moveSelection(1);
      } else if (/^[a-zA-Z]$/.test(evt.key)) {
        const letter = evt.key.toUpperCase();
        let mark = this.marks.find((m) => m.letter.toUpperCase() === letter);
        if (this.mode === "set") {
          if (!mark) {
            const file = this.app.workspace.getActiveFile();
            if (!file) {
              new import_obsidian.Notice("No active file to mark.");
              return;
            }
            mark = { letter, filePath: file.path };
          }
          evt.preventDefault();
          await this.onChooseSuggestion(mark, evt);
          this.close();
        } else if (mark) {
          evt.preventDefault();
          await this.onChooseSuggestion(mark, evt);
          this.close();
        }
      }
    };
    window.addEventListener("keydown", this._keyHandler, true);
  }
  onClose() {
    if (this._keyHandler) {
      window.removeEventListener("keydown", this._keyHandler, true);
      this._keyHandler = void 0;
    }
    super.onClose();
  }
  moveSelection(delta) {
    const chooser = this.chooser;
    if (!chooser)
      return;
    let idx = chooser.selectedItem;
    if (typeof idx !== "number")
      idx = 0;
    const max = chooser.values.length;
    let next = idx + delta;
    if (next < 0)
      next = max - 1;
    if (next >= max)
      next = 0;
    chooser.setSelectedItem(next, true);
  }
  matchKeybind(evt, keybind) {
    const parts = keybind.split("+").map((p) => p.trim().toLowerCase());
    let required = { ctrl: false, shift: false, alt: false, meta: false, key: "" };
    for (const part of parts) {
      if (part === "ctrl")
        required.ctrl = true;
      else if (part === "shift")
        required.shift = true;
      else if (part === "alt")
        required.alt = true;
      else if (part === "meta" || part === "cmd" || part === "win")
        required.meta = true;
      else
        required.key = part;
    }
    if (evt.ctrlKey !== required.ctrl)
      return false;
    if (evt.shiftKey !== required.shift)
      return false;
    if (evt.altKey !== required.alt)
      return false;
    if (evt.metaKey !== required.meta)
      return false;
    return evt.key.toLowerCase() === required.key;
  }
};

// src/commands.ts
async function setGlobalMark(plugin) {
  new MarkListModal(plugin.app, plugin, "set").open();
}
async function goToGlobalMark(plugin) {
  new MarkListModal(plugin.app, plugin, "goto").open();
}

// src/ui/SettingsTab.ts
var import_obsidian2 = require("obsidian");
var SettingsTab = class extends import_obsidian2.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian2.Setting(containerEl).setName("Hide mark list").setDesc("Hide the global mark list for both commands (for fast input, no flicker).").addToggle((toggle) => toggle.setValue(this.plugin.settings.hideMarkListDuringInput).onChange(async (value) => {
      this.plugin.settings.hideMarkListDuringInput = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName("Open mark in new tab").setDesc("If enabled, opening a mark will open the file in a new tab. If disabled, it will open in the current tab.").addToggle(
      (toggle) => {
        var _a;
        return toggle.setValue((_a = this.plugin.settings.openMarkInNewTab) != null ? _a : false).onChange(async (value) => {
          this.plugin.settings.openMarkInNewTab = value;
          await this.plugin.saveSettings();
        });
      }
    );
    containerEl.createEl("h4", { text: "Mark List Navigation Shortcuts" });
    this.createShortcutSetting(containerEl, "Up", "ctrl+P", "Shortcut for moving up in the mark list", "markListUp");
    this.createShortcutSetting(containerEl, "Down", "ctrl+N", "Shortcut for moving down in the mark list", "markListDown");
    this.createShortcutSetting(containerEl, "Select", "Enter", "Shortcut for selecting a mark", "markListSelect");
  }
  createShortcutSetting(containerEl, name, defaultValue, desc, key) {
    new import_obsidian2.Setting(containerEl).setName(name).setDesc(desc).addText((text) => text.setValue(this.plugin.settings[key] || defaultValue).onChange(async (value) => {
      this.plugin.settings[key] = value;
      await this.plugin.saveSettings();
    }));
  }
};

// src/utils/storage.ts
async function loadSettings(plugin) {
  var _a;
  return ((_a = await plugin.loadData()) == null ? void 0 : _a.settings) || { hideMarkListDuringInput: false };
}
async function saveSettings(plugin, settings) {
  const data = await plugin.loadData() || {};
  data.settings = settings;
  await plugin.saveData(data);
}
async function loadMarks(plugin) {
  var _a;
  return ((_a = await plugin.loadData()) == null ? void 0 : _a.marks) || [];
}
async function saveMarks(plugin, marks) {
  const data = await plugin.loadData() || {};
  data.marks = marks;
  await plugin.saveData(data);
}

// src/main.ts
var VimMarksImpl = class extends import_obsidian3.Plugin {
  constructor() {
    super(...arguments);
    this.marks = [];
  }
  async onload() {
    this.settings = await loadSettings(this);
    this.marks = await loadMarks(this);
    this.addCommand({
      id: "set-global-mark",
      name: "Set Global Mark",
      callback: () => setGlobalMark(this)
    });
    this.addCommand({
      id: "go-to-global-mark",
      name: "Go to Global Mark",
      callback: () => goToGlobalMark(this)
    });
    this.addSettingTab(new SettingsTab(this.app, this));
    this.addRibbonIcon("bookmark", "Show Global Marks", async () => {
      const modal = new MarkListModal(this.app, this, "show");
      modal.open();
    });
    console.log("VimMarksImpl plugin loaded");
  }
  async saveSettings() {
    await saveSettings(this, this.settings);
  }
  async saveMarks(marks) {
    this.marks = marks;
    await saveMarks(this, marks);
  }
  onunload() {
    console.log("VimMarksImpl plugin unloaded");
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsidmltLW1hcmtzLWltcGwvc3JjL21haW4udHMiLCAidmltLW1hcmtzLWltcGwvc3JjL3VpL01hcmtMaXN0TW9kYWwudHMiLCAidmltLW1hcmtzLWltcGwvc3JjL2NvbW1hbmRzLnRzIiwgInZpbS1tYXJrcy1pbXBsL3NyYy91aS9TZXR0aW5nc1RhYi50cyIsICJ2aW0tbWFya3MtaW1wbC9zcmMvdXRpbHMvc3RvcmFnZS50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgUGx1Z2luIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgc2V0R2xvYmFsTWFyaywgZ29Ub0dsb2JhbE1hcmsgfSBmcm9tICcuL2NvbW1hbmRzJztcbmltcG9ydCB7IE1hcmtMaXN0TW9kYWwgfSBmcm9tICcuL3VpL01hcmtMaXN0TW9kYWwnO1xuaW1wb3J0IHsgU2V0dGluZ3NUYWIgfSBmcm9tICcuL3VpL1NldHRpbmdzVGFiJztcbmltcG9ydCB7IGxvYWRTZXR0aW5ncywgc2F2ZVNldHRpbmdzLCBsb2FkTWFya3MsIHNhdmVNYXJrcyB9IGZyb20gJy4vdXRpbHMvc3RvcmFnZSc7XG5pbXBvcnQgeyBTZXR0aW5ncywgTWFyayB9IGZyb20gJy4vdHlwZXMvaW5kZXgnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBWaW1NYXJrc0ltcGwgZXh0ZW5kcyBQbHVnaW4ge1xuICAgIHNldHRpbmdzITogU2V0dGluZ3M7XG4gICAgbWFya3M6IE1hcmtbXSA9IFtdO1xuXG4gICAgYXN5bmMgb25sb2FkKCkge1xuICAgICAgICB0aGlzLnNldHRpbmdzID0gYXdhaXQgbG9hZFNldHRpbmdzKHRoaXMpO1xuICAgICAgICB0aGlzLm1hcmtzID0gYXdhaXQgbG9hZE1hcmtzKHRoaXMpO1xuXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogJ3NldC1nbG9iYWwtbWFyaycsXG4gICAgICAgICAgICBuYW1lOiAnU2V0IEdsb2JhbCBNYXJrJyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiBzZXRHbG9iYWxNYXJrKHRoaXMpLFxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICdnby10by1nbG9iYWwtbWFyaycsXG4gICAgICAgICAgICBuYW1lOiAnR28gdG8gR2xvYmFsIE1hcmsnLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IGdvVG9HbG9iYWxNYXJrKHRoaXMpLFxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmFkZFNldHRpbmdUYWIobmV3IFNldHRpbmdzVGFiKHRoaXMuYXBwLCB0aGlzKSk7XG5cbiAgICAgICAgdGhpcy5hZGRSaWJib25JY29uKCdib29rbWFyaycsICdTaG93IEdsb2JhbCBNYXJrcycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG1vZGFsID0gbmV3IE1hcmtMaXN0TW9kYWwodGhpcy5hcHAsIHRoaXMsICdzaG93Jyk7XG4gICAgICAgICAgICBtb2RhbC5vcGVuKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKCdWaW1NYXJrc0ltcGwgcGx1Z2luIGxvYWRlZCcpO1xuICAgIH1cblxuICAgIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcbiAgICAgICAgYXdhaXQgc2F2ZVNldHRpbmdzKHRoaXMsIHRoaXMuc2V0dGluZ3MpO1xuICAgIH1cblxuICAgIGFzeW5jIHNhdmVNYXJrcyhtYXJrczogTWFya1tdKSB7XG4gICAgICAgIHRoaXMubWFya3MgPSBtYXJrcztcbiAgICAgICAgYXdhaXQgc2F2ZU1hcmtzKHRoaXMsIG1hcmtzKTtcbiAgICB9XG5cbiAgICBvbnVubG9hZCgpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1ZpbU1hcmtzSW1wbCBwbHVnaW4gdW5sb2FkZWQnKTtcbiAgICAgICAgLy8gQ2xlYW51cCBpZiBuZWNlc3NhcnlcbiAgICB9XG59IiwgImltcG9ydCB7IEFwcCwgVEZpbGUsIE5vdGljZSwgU3VnZ2VzdE1vZGFsLCBNYXJrZG93blZpZXcgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCBWaW1NYXJrc0ltcGwgZnJvbSAnLi4vbWFpbic7XHJcbmltcG9ydCB7IE1hcmsgfSBmcm9tICcuLi90eXBlcy9pbmRleCc7XHJcblxyXG50eXBlIE1vZGUgPSAnc2V0JyB8ICdnb3RvJyB8ICdzaG93JztcclxuXHJcbmV4cG9ydCBjbGFzcyBNYXJrTGlzdE1vZGFsIGV4dGVuZHMgU3VnZ2VzdE1vZGFsPE1hcms+IHtcclxuICAgIHBsdWdpbjogVmltTWFya3NJbXBsO1xyXG4gICAgbW9kZTogTW9kZTtcclxuICAgIG1hcmtzOiBNYXJrW107XHJcbiAgICBwcml2YXRlIF9rZXlIYW5kbGVyPzogKGV2dDogS2V5Ym9hcmRFdmVudCkgPT4gdm9pZDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBWaW1NYXJrc0ltcGwsIG1vZGU6IE1vZGUpIHtcclxuICAgICAgICBzdXBlcihhcHApO1xyXG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG4gICAgICAgIHRoaXMubW9kZSA9IG1vZGU7XHJcbiAgICAgICAgdGhpcy5tYXJrcyA9IHBsdWdpbi5tYXJrcztcclxuICAgICAgICB0aGlzLnNldFBsYWNlaG9sZGVyKHRoaXMubW9kZSA9PT0gJ3NldCcgPyAnU2VsZWN0IGEgbWFyayB0byBzZXQnIDogJ1NlbGVjdCBhIG1hcmsgdG8gZ28gdG8nKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRTdWdnZXN0aW9ucyhxdWVyeTogc3RyaW5nKTogTWFya1tdIHtcclxuICAgICAgICAvLyBObyBzZWFyY2ggaW5wdXQsIGFsd2F5cyBzaG93IGFsbCBtYXJrc1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1hcmtzO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlclN1Z2dlc3Rpb24obWFyazogTWFyaywgZWw6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgZWwuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogYCR7bWFyay5sZXR0ZXJ9OiAke21hcmsuZmlsZVBhdGh9YCB9KTtcclxuICAgICAgICAvLyBJbW1lZGlhdGUgZXhlY3V0aW9uIG9uIG1vdXNlIGNsaWNrIGZvciBBLVogbWFya3NcclxuICAgICAgICBpZiAoL15bQS1aXSQvaS50ZXN0KG1hcmsubGV0dGVyKSkge1xyXG4gICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jIChldnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMub25DaG9vc2VTdWdnZXN0aW9uKG1hcmssIGV2dCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBvbkNob29zZVN1Z2dlc3Rpb24obWFyazogTWFyaywgZXZ0OiBNb3VzZUV2ZW50IHwgS2V5Ym9hcmRFdmVudCkge1xyXG4gICAgICAgIGlmICh0aGlzLm1vZGUgPT09ICdzZXQnKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xyXG4gICAgICAgICAgICBpZiAoIWZpbGUpIHtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ05vIGFjdGl2ZSBmaWxlIHRvIG1hcmsuJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgbWFya3MgPSB0aGlzLnBsdWdpbi5tYXJrcy5maWx0ZXIoKG0pID0+IG0ubGV0dGVyICE9PSBtYXJrLmxldHRlcik7XHJcbiAgICAgICAgICAgIG1hcmtzLnB1c2goeyBsZXR0ZXI6IG1hcmsubGV0dGVyLCBmaWxlUGF0aDogZmlsZS5wYXRoIH0pO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlTWFya3MobWFya3MpO1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKGBTZXQgbWFyayAnJHttYXJrLmxldHRlcn0nIHRvICR7ZmlsZS5uYW1lfWApO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5tb2RlID09PSAnZ290bycpIHtcclxuICAgICAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChtYXJrLmZpbGVQYXRoKTtcclxuICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGZpbGUgaXMgYWxyZWFkeSBvcGVuIGluIGEgbGVhZlxyXG4gICAgICAgICAgICAgICAgY29uc3QgbGVhdmVzID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSgnbWFya2Rvd24nKTtcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbGVhZiBvZiBsZWF2ZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB2aWV3ID0gbGVhZi52aWV3O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh2aWV3IGluc3RhbmNlb2YgTWFya2Rvd25WaWV3ICYmIHZpZXcuZmlsZSAmJiB2aWV3LmZpbGUucGF0aCA9PT0gbWFyay5maWxlUGF0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2Uuc2V0QWN0aXZlTGVhZihsZWFmLCB0cnVlLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIElmIG5vdCBvcGVuLCBvcGVuIGl0IGluIHRoZSBwcmVmZXJyZWQgdGFiXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Mub3Blbk1hcmtJbk5ld1RhYikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCd0YWInKS5vcGVuRmlsZShmaWxlKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoKS5vcGVuRmlsZShmaWxlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYEZpbGUgbm90IGZvdW5kIGZvciBtYXJrICcke21hcmsubGV0dGVyfSdgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBPdmVycmlkZSB0byBoaWRlIHRoZSBpbnB1dCBib3hcclxuICAgIG9uT3BlbigpIHtcclxuICAgICAgICBzdXBlci5vbk9wZW4oKTtcclxuICAgICAgICBpZiAodGhpcy5pbnB1dEVsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5wdXRFbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB1cEtleSA9ICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5tYXJrTGlzdFVwIHx8ICAnY3RybCtwJyk7XHJcbiAgICAgICAgY29uc3QgZG93bktleSA9ICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5tYXJrTGlzdERvd24gfHwgJ2N0cmwrbicpO1xyXG4gICAgICAgIHRoaXMuX2tleUhhbmRsZXIgPSBhc3luYyAoZXZ0OiBLZXlib2FyZEV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm1hdGNoS2V5YmluZChldnQsIHVwS2V5KSkge1xyXG4gICAgICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVTZWxlY3Rpb24oLTEpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMubWF0Y2hLZXliaW5kKGV2dCwgZG93bktleSkpIHtcclxuICAgICAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tb3ZlU2VsZWN0aW9uKDEpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKC9eW2EtekEtWl0kLy50ZXN0KGV2dC5rZXkpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsZXR0ZXIgPSBldnQua2V5LnRvVXBwZXJDYXNlKCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgbWFyayA9IHRoaXMubWFya3MuZmluZChtID0+IG0ubGV0dGVyLnRvVXBwZXJDYXNlKCkgPT09IGxldHRlcik7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5tb2RlID09PSAnc2V0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghbWFyaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYSBuZXcgbWFyayBmb3IgdGhpcyBsZXR0ZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZmlsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnTm8gYWN0aXZlIGZpbGUgdG8gbWFyay4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrID0geyBsZXR0ZXIsIGZpbGVQYXRoOiBmaWxlLnBhdGggfTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5vbkNob29zZVN1Z2dlc3Rpb24obWFyaywgZXZ0KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1hcmspIHtcclxuICAgICAgICAgICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm9uQ2hvb3NlU3VnZ2VzdGlvbihtYXJrLCBldnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9rZXlIYW5kbGVyLCB0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNsb3NlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9rZXlIYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5fa2V5SGFuZGxlciwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIHRoaXMuX2tleUhhbmRsZXIgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHN1cGVyLm9uQ2xvc2UoKTtcclxuICAgIH1cclxuXHJcbiAgICBtb3ZlU2VsZWN0aW9uKGRlbHRhOiBudW1iZXIpIHtcclxuICAgICAgICAvLyBNb3ZlIHRoZSBzZWxlY3Rpb24gdXAgb3IgZG93biBieSBkZWx0YVxyXG4gICAgICAgIC8vIHRoaXMuY2hvb3NlciBpcyBTdWdnZXN0TW9kYWwncyBpbnRlcm5hbCBjaG9vc2VyXHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGNvbnN0IGNob29zZXIgPSB0aGlzLmNob29zZXI7XHJcbiAgICAgICAgaWYgKCFjaG9vc2VyKSByZXR1cm47XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGxldCBpZHggPSBjaG9vc2VyLnNlbGVjdGVkSXRlbTtcclxuICAgICAgICBpZiAodHlwZW9mIGlkeCAhPT0gJ251bWJlcicpIGlkeCA9IDA7XHJcbiAgICAgICAgY29uc3QgbWF4ID0gY2hvb3Nlci52YWx1ZXMubGVuZ3RoO1xyXG4gICAgICAgIGxldCBuZXh0ID0gaWR4ICsgZGVsdGE7XHJcbiAgICAgICAgaWYgKG5leHQgPCAwKSBuZXh0ID0gbWF4IC0gMTtcclxuICAgICAgICBpZiAobmV4dCA+PSBtYXgpIG5leHQgPSAwO1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBjaG9vc2VyLnNldFNlbGVjdGVkSXRlbShuZXh0LCB0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICBtYXRjaEtleWJpbmQoZXZ0OiBLZXlib2FyZEV2ZW50LCBrZXliaW5kOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICAvLyBQYXJzZSBrZXliaW5kIHN0cmluZyBsaWtlICdjdHJsK3NoaWZ0K3AnLCAnY3RybCtuJywgJ2FsdCtkb3duJywgZXRjLlxyXG4gICAgICAgIGNvbnN0IHBhcnRzID0ga2V5YmluZC5zcGxpdCgnKycpLm1hcChwID0+IHAudHJpbSgpLnRvTG93ZXJDYXNlKCkpO1xyXG4gICAgICAgIGxldCByZXF1aXJlZCA9IHsgY3RybDogZmFsc2UsIHNoaWZ0OiBmYWxzZSwgYWx0OiBmYWxzZSwgbWV0YTogZmFsc2UsIGtleTogJycgfTtcclxuICAgICAgICBmb3IgKGNvbnN0IHBhcnQgb2YgcGFydHMpIHtcclxuICAgICAgICAgICAgaWYgKHBhcnQgPT09ICdjdHJsJykgcmVxdWlyZWQuY3RybCA9IHRydWU7XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHBhcnQgPT09ICdzaGlmdCcpIHJlcXVpcmVkLnNoaWZ0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgZWxzZSBpZiAocGFydCA9PT0gJ2FsdCcpIHJlcXVpcmVkLmFsdCA9IHRydWU7XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHBhcnQgPT09ICdtZXRhJyB8fCBwYXJ0ID09PSAnY21kJyB8fCBwYXJ0ID09PSAnd2luJykgcmVxdWlyZWQubWV0YSA9IHRydWU7XHJcbiAgICAgICAgICAgIGVsc2UgcmVxdWlyZWQua2V5ID0gcGFydDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQ2hlY2sgbW9kaWZpZXJzXHJcbiAgICAgICAgaWYgKGV2dC5jdHJsS2V5ICE9PSByZXF1aXJlZC5jdHJsKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgaWYgKGV2dC5zaGlmdEtleSAhPT0gcmVxdWlyZWQuc2hpZnQpIHJldHVybiBmYWxzZTtcclxuICAgICAgICBpZiAoZXZ0LmFsdEtleSAhPT0gcmVxdWlyZWQuYWx0KSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgaWYgKGV2dC5tZXRhS2V5ICE9PSByZXF1aXJlZC5tZXRhKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgLy8gQ2hlY2sga2V5IChjYXNlLWluc2Vuc2l0aXZlKVxyXG4gICAgICAgIHJldHVybiBldnQua2V5LnRvTG93ZXJDYXNlKCkgPT09IHJlcXVpcmVkLmtleTtcclxuICAgIH1cclxuXHJcbn0iLCAiaW1wb3J0IFZpbU1hcmtzSW1wbCBmcm9tICcuL21haW4nO1xyXG5pbXBvcnQgeyBNYXJrIH0gZnJvbSAnLi90eXBlcyc7XHJcbmltcG9ydCB7IE1hcmtMaXN0TW9kYWwgfSBmcm9tICcuL3VpL01hcmtMaXN0TW9kYWwnO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNldEdsb2JhbE1hcmsocGx1Z2luOiBWaW1NYXJrc0ltcGwpIHtcclxuICAgIG5ldyBNYXJrTGlzdE1vZGFsKHBsdWdpbi5hcHAsIHBsdWdpbiwgJ3NldCcpLm9wZW4oKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdvVG9HbG9iYWxNYXJrKHBsdWdpbjogVmltTWFya3NJbXBsKSB7XHJcbiAgICBuZXcgTWFya0xpc3RNb2RhbChwbHVnaW4uYXBwLCBwbHVnaW4sICdnb3RvJykub3BlbigpO1xyXG59IiwgImltcG9ydCB7IEFwcCwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCBWaW1NYXJrc0ltcGwgZnJvbSAnLi4vbWFpbic7XG5pbXBvcnQgeyBTZXR0aW5ncyB9IGZyb20gJy4uL3R5cGVzL2luZGV4JztcblxuZXhwb3J0IGNsYXNzIFNldHRpbmdzVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG4gICAgcGx1Z2luOiBWaW1NYXJrc0ltcGw7XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBWaW1NYXJrc0ltcGwpIHtcbiAgICAgICAgc3VwZXIoYXBwLCBwbHVnaW4pO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB9XG5cbiAgICBkaXNwbGF5KCk6IHZvaWQge1xuICAgICAgICBjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuICAgICAgICBjb250YWluZXJFbC5lbXB0eSgpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0hpZGUgbWFyayBsaXN0JylcbiAgICAgICAgICAgIC5zZXREZXNjKCdIaWRlIHRoZSBnbG9iYWwgbWFyayBsaXN0IGZvciBib3RoIGNvbW1hbmRzIChmb3IgZmFzdCBpbnB1dCwgbm8gZmxpY2tlcikuJylcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWRlTWFya0xpc3REdXJpbmdJbnB1dClcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmhpZGVNYXJrTGlzdER1cmluZ0lucHV0ID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdPcGVuIG1hcmsgaW4gbmV3IHRhYicpXG4gICAgICAgICAgICAuc2V0RGVzYygnSWYgZW5hYmxlZCwgb3BlbmluZyBhIG1hcmsgd2lsbCBvcGVuIHRoZSBmaWxlIGluIGEgbmV3IHRhYi4gSWYgZGlzYWJsZWQsIGl0IHdpbGwgb3BlbiBpbiB0aGUgY3VycmVudCB0YWIuJylcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5vcGVuTWFya0luTmV3VGFiID8/IGZhbHNlKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Mub3Blbk1hcmtJbk5ld1RhYiA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAvLyBBZGQga2V5Ym9hcmQgc2hvcnRjdXQgc2V0dGluZ3NcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnTWFyayBMaXN0IE5hdmlnYXRpb24gU2hvcnRjdXRzJyB9KTtcbiAgICAgICAgdGhpcy5jcmVhdGVTaG9ydGN1dFNldHRpbmcoY29udGFpbmVyRWwsICdVcCcsICdjdHJsK1AnLCAnU2hvcnRjdXQgZm9yIG1vdmluZyB1cCBpbiB0aGUgbWFyayBsaXN0JywgJ21hcmtMaXN0VXAnKTtcbiAgICAgICAgdGhpcy5jcmVhdGVTaG9ydGN1dFNldHRpbmcoY29udGFpbmVyRWwsICdEb3duJywgJ2N0cmwrTicsICdTaG9ydGN1dCBmb3IgbW92aW5nIGRvd24gaW4gdGhlIG1hcmsgbGlzdCcsICdtYXJrTGlzdERvd24nKTtcbiAgICAgICAgdGhpcy5jcmVhdGVTaG9ydGN1dFNldHRpbmcoY29udGFpbmVyRWwsICdTZWxlY3QnLCAnRW50ZXInLCAnU2hvcnRjdXQgZm9yIHNlbGVjdGluZyBhIG1hcmsnLCAnbWFya0xpc3RTZWxlY3QnKTtcbiAgICB9XG5cbiAgICBjcmVhdGVTaG9ydGN1dFNldHRpbmcoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50LCBuYW1lOiBzdHJpbmcsIGRlZmF1bHRWYWx1ZTogc3RyaW5nLCBkZXNjOiBzdHJpbmcsIGtleToga2V5b2YgU2V0dGluZ3MpIHtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShuYW1lKVxuICAgICAgICAgICAgLnNldERlc2MoZGVzYylcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSgodGhpcy5wbHVnaW4uc2V0dGluZ3MgYXMgYW55KVtrZXldIHx8IGRlZmF1bHRWYWx1ZSlcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICh0aGlzLnBsdWdpbi5zZXR0aW5ncyBhcyBhbnkpW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgIH1cbn0iLCAiaW1wb3J0IFZpbU1hcmtzSW1wbCBmcm9tICcuLi9tYWluJztcclxuaW1wb3J0IHsgU2V0dGluZ3MsIE1hcmsgfSBmcm9tICcuLi90eXBlcy9pbmRleCc7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9hZFNldHRpbmdzKHBsdWdpbjogVmltTWFya3NJbXBsKTogUHJvbWlzZTxTZXR0aW5ncz4ge1xyXG4gICAgcmV0dXJuIChhd2FpdCBwbHVnaW4ubG9hZERhdGEoKSk/LnNldHRpbmdzIHx8IHsgaGlkZU1hcmtMaXN0RHVyaW5nSW5wdXQ6IGZhbHNlIH07XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzYXZlU2V0dGluZ3MocGx1Z2luOiBWaW1NYXJrc0ltcGwsIHNldHRpbmdzOiBTZXR0aW5ncykge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHBsdWdpbi5sb2FkRGF0YSgpIHx8IHt9O1xyXG4gICAgZGF0YS5zZXR0aW5ncyA9IHNldHRpbmdzO1xyXG4gICAgYXdhaXQgcGx1Z2luLnNhdmVEYXRhKGRhdGEpO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9hZE1hcmtzKHBsdWdpbjogVmltTWFya3NJbXBsKTogUHJvbWlzZTxNYXJrW10+IHtcclxuICAgIHJldHVybiAoYXdhaXQgcGx1Z2luLmxvYWREYXRhKCkpPy5tYXJrcyB8fCBbXTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNhdmVNYXJrcyhwbHVnaW46IFZpbU1hcmtzSW1wbCwgbWFya3M6IE1hcmtbXSkge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHBsdWdpbi5sb2FkRGF0YSgpIHx8IHt9O1xyXG4gICAgZGF0YS5tYXJrcyA9IG1hcmtzO1xyXG4gICAgYXdhaXQgcGx1Z2luLnNhdmVEYXRhKGRhdGEpO1xyXG59Il0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQUFBQSxtQkFBdUI7OztBQ0F2QixzQkFBK0Q7QUFNeEQsSUFBTSxnQkFBTixjQUE0Qiw2QkFBbUI7QUFBQSxFQU1sRCxZQUFZLEtBQVUsUUFBc0IsTUFBWTtBQUNwRCxVQUFNLEdBQUc7QUFDVCxTQUFLLFNBQVM7QUFDZCxTQUFLLE9BQU87QUFDWixTQUFLLFFBQVEsT0FBTztBQUNwQixTQUFLLGVBQWUsS0FBSyxTQUFTLFFBQVEseUJBQXlCLHdCQUF3QjtBQUFBLEVBQy9GO0FBQUEsRUFFQSxlQUFlLE9BQXVCO0FBRWxDLFdBQU8sS0FBSztBQUFBLEVBQ2hCO0FBQUEs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
