/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => VimMarksImpl
});
module.exports = __toCommonJS(main_exports);
var import_obsidian3 = require("obsidian");

// src/ui/MarkListModal.ts
var import_obsidian = require("obsidian");
var MarkListModal = class extends import_obsidian.SuggestModal {
  constructor(app, plugin, mode) {
    super(app);
    this.plugin = plugin;
    this.mode = mode;
    this.marks = plugin.marks;
    this.setPlaceholder(this.mode === "set" ? "Select a mark to set" : "Select a mark to go to");
  }
  getSuggestions(query) {
    return this.marks;
  }
  renderSuggestion(mark, el) {
    el.createEl("div", { text: `${mark.letter}: ${mark.filePath}` });
    if (/^[A-Z]$/i.test(mark.letter)) {
      el.addEventListener("click", async (evt) => {
        await this.onChooseSuggestion(mark, evt);
        this.close();
      });
    }
  }
  async onChooseSuggestion(mark, evt) {
    if (this.mode === "set") {
      const file = this.app.workspace.getActiveFile();
      if (!file) {
        new import_obsidian.Notice("No active file to mark.");
        return;
      }
      const marks = this.plugin.marks.filter((m) => m.letter !== mark.letter);
      marks.push({ letter: mark.letter, filePath: file.path });
      await this.plugin.saveMarks(marks);
      new import_obsidian.Notice(`Set mark '${mark.letter}' to ${file.name}`);
    } else if (this.mode === "goto") {
      const file = this.app.vault.getAbstractFileByPath(mark.filePath);
      if (file instanceof import_obsidian.TFile) {
        const leaves = this.app.workspace.getLeavesOfType("markdown");
        for (const leaf of leaves) {
          const view = leaf.view;
          if (view instanceof import_obsidian.MarkdownView && view.file && view.file.path === mark.filePath) {
            this.app.workspace.setActiveLeaf(leaf, true, true);
            return;
          }
        }
        this.app.workspace.getLeaf().openFile(file);
      } else {
        new import_obsidian.Notice(`File not found for mark '${mark.letter}'`);
      }
    }
  }
  // Override to hide the input box
  onOpen() {
    super.onOpen();
    if (this.inputEl) {
      this.inputEl.style.display = "none";
    }
    const upKey = this.plugin.settings.markListUp || "ctrl+p";
    const downKey = this.plugin.settings.markListDown || "ctrl+n";
    this._keyHandler = async (evt) => {
      if (this.matchKeybind(evt, upKey)) {
        evt.preventDefault();
        this.moveSelection(-1);
      } else if (this.matchKeybind(evt, downKey)) {
        evt.preventDefault();
        this.moveSelection(1);
      } else if (/^[a-zA-Z]$/.test(evt.key)) {
        const letter = evt.key.toUpperCase();
        let mark = this.marks.find((m) => m.letter.toUpperCase() === letter);
        if (this.mode === "set") {
          if (!mark) {
            const file = this.app.workspace.getActiveFile();
            if (!file) {
              new import_obsidian.Notice("No active file to mark.");
              return;
            }
            mark = { letter, filePath: file.path };
          }
          evt.preventDefault();
          await this.onChooseSuggestion(mark, evt);
          this.close();
        } else if (mark) {
          evt.preventDefault();
          await this.onChooseSuggestion(mark, evt);
          this.close();
        }
      }
    };
    window.addEventListener("keydown", this._keyHandler, true);
  }
  onClose() {
    if (this._keyHandler) {
      window.removeEventListener("keydown", this._keyHandler, true);
      this._keyHandler = void 0;
    }
    super.onClose();
  }
  moveSelection(delta) {
    const chooser = this.chooser;
    if (!chooser)
      return;
    let idx = chooser.selectedItem;
    if (typeof idx !== "number")
      idx = 0;
    const max = chooser.values.length;
    let next = idx + delta;
    if (next < 0)
      next = max - 1;
    if (next >= max)
      next = 0;
    chooser.setSelectedItem(next, true);
  }
  matchKeybind(evt, keybind) {
    const parts = keybind.split("+").map((p) => p.trim().toLowerCase());
    let required = { ctrl: false, shift: false, alt: false, meta: false, key: "" };
    for (const part of parts) {
      if (part === "ctrl")
        required.ctrl = true;
      else if (part === "shift")
        required.shift = true;
      else if (part === "alt")
        required.alt = true;
      else if (part === "meta" || part === "cmd" || part === "win")
        required.meta = true;
      else
        required.key = part;
    }
    if (evt.ctrlKey !== required.ctrl)
      return false;
    if (evt.shiftKey !== required.shift)
      return false;
    if (evt.altKey !== required.alt)
      return false;
    if (evt.metaKey !== required.meta)
      return false;
    return evt.key.toLowerCase() === required.key;
  }
};

// src/commands.ts
async function setGlobalMark(plugin) {
  new MarkListModal(plugin.app, plugin, "set").open();
}
async function goToGlobalMark(plugin) {
  new MarkListModal(plugin.app, plugin, "goto").open();
}

// src/ui/SettingsTab.ts
var import_obsidian2 = require("obsidian");
var SettingsTab = class extends import_obsidian2.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian2.Setting(containerEl).setName("Hide mark list").setDesc("Hide the global mark list for both commands (for fast input, no flicker).").addToggle((toggle) => toggle.setValue(this.plugin.settings.hideMarkListDuringInput).onChange(async (value) => {
      this.plugin.settings.hideMarkListDuringInput = value;
      await this.plugin.saveSettings();
    }));
    containerEl.createEl("h4", { text: "Mark List Navigation Shortcuts" });
    this.createShortcutSetting(containerEl, "Up", "ctrl+P", "Shortcut for moving up in the mark list", "markListUp");
    this.createShortcutSetting(containerEl, "Down", "ctrl+N", "Shortcut for moving down in the mark list", "markListDown");
    this.createShortcutSetting(containerEl, "Select", "Enter", "Shortcut for selecting a mark", "markListSelect");
  }
  createShortcutSetting(containerEl, name, defaultValue, desc, key) {
    new import_obsidian2.Setting(containerEl).setName(name).setDesc(desc).addText((text) => text.setValue(this.plugin.settings[key] || defaultValue).onChange(async (value) => {
      this.plugin.settings[key] = value;
      await this.plugin.saveSettings();
    }));
  }
};

// src/utils/storage.ts
async function loadSettings(plugin) {
  var _a;
  return ((_a = await plugin.loadData()) == null ? void 0 : _a.settings) || { hideMarkListDuringInput: false };
}
async function saveSettings(plugin, settings) {
  const data = await plugin.loadData() || {};
  data.settings = settings;
  await plugin.saveData(data);
}
async function loadMarks(plugin) {
  var _a;
  return ((_a = await plugin.loadData()) == null ? void 0 : _a.marks) || [];
}
async function saveMarks(plugin, marks) {
  const data = await plugin.loadData() || {};
  data.marks = marks;
  await plugin.saveData(data);
}

// src/main.ts
var VimMarksImpl = class extends import_obsidian3.Plugin {
  constructor() {
    super(...arguments);
    this.marks = [];
  }
  async onload() {
    this.settings = await loadSettings(this);
    this.marks = await loadMarks(this);
    this.addCommand({
      id: "set-global-mark",
      name: "Set Global Mark",
      callback: () => setGlobalMark(this)
    });
    this.addCommand({
      id: "go-to-global-mark",
      name: "Go to Global Mark",
      callback: () => goToGlobalMark(this)
    });
    this.addSettingTab(new SettingsTab(this.app, this));
    this.addRibbonIcon("bookmark", "Show Global Marks", async () => {
      const modal = new MarkListModal(this.app, this, "show");
      modal.open();
    });
    console.log("VimMarksImpl plugin loaded");
  }
  async saveSettings() {
    await saveSettings(this, this.settings);
  }
  async saveMarks(marks) {
    this.marks = marks;
    await saveMarks(this, marks);
  }
  onunload() {
    console.log("VimMarksImpl plugin unloaded");
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsidmltLW1hcmtzLWltcGwvc3JjL21haW4udHMiLCAidmltLW1hcmtzLWltcGwvc3JjL3VpL01hcmtMaXN0TW9kYWwudHMiLCAidmltLW1hcmtzLWltcGwvc3JjL2NvbW1hbmRzLnRzIiwgInZpbS1tYXJrcy1pbXBsL3NyYy91aS9TZXR0aW5nc1RhYi50cyIsICJ2aW0tbWFya3MtaW1wbC9zcmMvdXRpbHMvc3RvcmFnZS50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgUGx1Z2luIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgc2V0R2xvYmFsTWFyaywgZ29Ub0dsb2JhbE1hcmsgfSBmcm9tICcuL2NvbW1hbmRzJztcbmltcG9ydCB7IE1hcmtMaXN0TW9kYWwgfSBmcm9tICcuL3VpL01hcmtMaXN0TW9kYWwnO1xuaW1wb3J0IHsgU2V0dGluZ3NUYWIgfSBmcm9tICcuL3VpL1NldHRpbmdzVGFiJztcbmltcG9ydCB7IGxvYWRTZXR0aW5ncywgc2F2ZVNldHRpbmdzLCBsb2FkTWFya3MsIHNhdmVNYXJrcyB9IGZyb20gJy4vdXRpbHMvc3RvcmFnZSc7XG5pbXBvcnQgeyBTZXR0aW5ncywgTWFyayB9IGZyb20gJy4vdHlwZXMvaW5kZXgnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBWaW1NYXJrc0ltcGwgZXh0ZW5kcyBQbHVnaW4ge1xuICAgIHNldHRpbmdzITogU2V0dGluZ3M7XG4gICAgbWFya3M6IE1hcmtbXSA9IFtdO1xuXG4gICAgYXN5bmMgb25sb2FkKCkge1xuICAgICAgICB0aGlzLnNldHRpbmdzID0gYXdhaXQgbG9hZFNldHRpbmdzKHRoaXMpO1xuICAgICAgICB0aGlzLm1hcmtzID0gYXdhaXQgbG9hZE1hcmtzKHRoaXMpO1xuXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogJ3NldC1nbG9iYWwtbWFyaycsXG4gICAgICAgICAgICBuYW1lOiAnU2V0IEdsb2JhbCBNYXJrJyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiBzZXRHbG9iYWxNYXJrKHRoaXMpLFxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICdnby10by1nbG9iYWwtbWFyaycsXG4gICAgICAgICAgICBuYW1lOiAnR28gdG8gR2xvYmFsIE1hcmsnLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IGdvVG9HbG9iYWxNYXJrKHRoaXMpLFxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmFkZFNldHRpbmdUYWIobmV3IFNldHRpbmdzVGFiKHRoaXMuYXBwLCB0aGlzKSk7XG5cbiAgICAgICAgdGhpcy5hZGRSaWJib25JY29uKCdib29rbWFyaycsICdTaG93IEdsb2JhbCBNYXJrcycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG1vZGFsID0gbmV3IE1hcmtMaXN0TW9kYWwodGhpcy5hcHAsIHRoaXMsICdzaG93Jyk7XG4gICAgICAgICAgICBtb2RhbC5vcGVuKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKCdWaW1NYXJrc0ltcGwgcGx1Z2luIGxvYWRlZCcpO1xuICAgIH1cblxuICAgIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcbiAgICAgICAgYXdhaXQgc2F2ZVNldHRpbmdzKHRoaXMsIHRoaXMuc2V0dGluZ3MpO1xuICAgIH1cblxuICAgIGFzeW5jIHNhdmVNYXJrcyhtYXJrczogTWFya1tdKSB7XG4gICAgICAgIHRoaXMubWFya3MgPSBtYXJrcztcbiAgICAgICAgYXdhaXQgc2F2ZU1hcmtzKHRoaXMsIG1hcmtzKTtcbiAgICB9XG5cbiAgICBvbnVubG9hZCgpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1ZpbU1hcmtzSW1wbCBwbHVnaW4gdW5sb2FkZWQnKTtcbiAgICAgICAgLy8gQ2xlYW51cCBpZiBuZWNlc3NhcnlcbiAgICB9XG59IiwgImltcG9ydCB7IEFwcCwgVEZpbGUsIE5vdGljZSwgU3VnZ2VzdE1vZGFsLCBNYXJrZG93blZpZXcgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgVmltTWFya3NJbXBsIGZyb20gJy4uL21haW4nO1xuaW1wb3J0IHsgTWFyayB9IGZyb20gJy4uL3R5cGVzL2luZGV4JztcblxudHlwZSBNb2RlID0gJ3NldCcgfCAnZ290bycgfCAnc2hvdyc7XG5cbmV4cG9ydCBjbGFzcyBNYXJrTGlzdE1vZGFsIGV4dGVuZHMgU3VnZ2VzdE1vZGFsPE1hcms+IHtcbiAgICBwbHVnaW46IFZpbU1hcmtzSW1wbDtcbiAgICBtb2RlOiBNb2RlO1xuICAgIG1hcmtzOiBNYXJrW107XG4gICAgcHJpdmF0ZSBfa2V5SGFuZGxlcj86IChldnQ6IEtleWJvYXJkRXZlbnQpID0+IHZvaWQ7XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBWaW1NYXJrc0ltcGwsIG1vZGU6IE1vZGUpIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIHRoaXMubW9kZSA9IG1vZGU7XG4gICAgICAgIHRoaXMubWFya3MgPSBwbHVnaW4ubWFya3M7XG4gICAgICAgIHRoaXMuc2V0UGxhY2Vob2xkZXIodGhpcy5tb2RlID09PSAnc2V0JyA/ICdTZWxlY3QgYSBtYXJrIHRvIHNldCcgOiAnU2VsZWN0IGEgbWFyayB0byBnbyB0bycpO1xuICAgIH1cblxuICAgIGdldFN1Z2dlc3Rpb25zKHF1ZXJ5OiBzdHJpbmcpOiBNYXJrW10ge1xuICAgICAgICAvLyBObyBzZWFyY2ggaW5wdXQsIGFsd2F5cyBzaG93IGFsbCBtYXJrc1xuICAgICAgICByZXR1cm4gdGhpcy5tYXJrcztcbiAgICB9XG5cbiAgICByZW5kZXJTdWdnZXN0aW9uKG1hcms6IE1hcmssIGVsOiBIVE1MRWxlbWVudCkge1xuICAgICAgICBlbC5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiBgJHttYXJrLmxldHRlcn06ICR7bWFyay5maWxlUGF0aH1gIH0pO1xuICAgICAgICAvLyBJbW1lZGlhdGUgZXhlY3V0aW9uIG9uIG1vdXNlIGNsaWNrIGZvciBBLVogbWFya3NcbiAgICAgICAgaWYgKC9eW0EtWl0kL2kudGVzdChtYXJrLmxldHRlcikpIHtcbiAgICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKGV2dCkgPT4ge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMub25DaG9vc2VTdWdnZXN0aW9uKG1hcmssIGV2dCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBvbkNob29zZVN1Z2dlc3Rpb24obWFyazogTWFyaywgZXZ0OiBNb3VzZUV2ZW50IHwgS2V5Ym9hcmRFdmVudCkge1xuICAgICAgICBpZiAodGhpcy5tb2RlID09PSAnc2V0Jykge1xuICAgICAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgICAgICAgICBpZiAoIWZpbGUpIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdObyBhY3RpdmUgZmlsZSB0byBtYXJrLicpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG1hcmtzID0gdGhpcy5wbHVnaW4ubWFya3MuZmlsdGVyKChtKSA9PiBtLmxldHRlciAhPT0gbWFyay5sZXR0ZXIpO1xuICAgICAgICAgICAgbWFya3MucHVzaCh7IGxldHRlcjogbWFyay5sZXR0ZXIsIGZpbGVQYXRoOiBmaWxlLnBhdGggfSk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlTWFya3MobWFya3MpO1xuICAgICAgICAgICAgbmV3IE5vdGljZShgU2V0IG1hcmsgJyR7bWFyay5sZXR0ZXJ9JyB0byAke2ZpbGUubmFtZX1gKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLm1vZGUgPT09ICdnb3RvJykge1xuICAgICAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChtYXJrLmZpbGVQYXRoKTtcbiAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgZmlsZSBpcyBhbHJlYWR5IG9wZW4gaW4gYSBsZWFmXG4gICAgICAgICAgICAgICAgY29uc3QgbGVhdmVzID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSgnbWFya2Rvd24nKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGxlYWYgb2YgbGVhdmVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZpZXcgPSBsZWFmLnZpZXc7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2aWV3IGluc3RhbmNlb2YgTWFya2Rvd25WaWV3ICYmIHZpZXcuZmlsZSAmJiB2aWV3LmZpbGUucGF0aCA9PT0gbWFyay5maWxlUGF0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLnNldEFjdGl2ZUxlYWYobGVhZiwgdHJ1ZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gSWYgbm90IG9wZW4sIG9wZW4gaXQgaW4gdGhlIGN1cnJlbnQgbGVhZlxuICAgICAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCkub3BlbkZpbGUoZmlsZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYEZpbGUgbm90IGZvdW5kIGZvciBtYXJrICcke21hcmsubGV0dGVyfSdgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIE92ZXJyaWRlIHRvIGhpZGUgdGhlIGlucHV0IGJveFxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgc3VwZXIub25PcGVuKCk7XG4gICAgICAgIGlmICh0aGlzLmlucHV0RWwpIHtcbiAgICAgICAgICAgIHRoaXMuaW5wdXRFbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHVwS2V5ID0gKHRoaXMucGx1Z2luLnNldHRpbmdzLm1hcmtMaXN0VXAgfHwgICdjdHJsK3AnKTtcbiAgICAgICAgY29uc3QgZG93bktleSA9ICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5tYXJrTGlzdERvd24gfHwgJ2N0cmwrbicpO1xuICAgICAgICB0aGlzLl9rZXlIYW5kbGVyID0gYXN5bmMgKGV2dDogS2V5Ym9hcmRFdmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMubWF0Y2hLZXliaW5kKGV2dCwgdXBLZXkpKSB7XG4gICAgICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5tb3ZlU2VsZWN0aW9uKC0xKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5tYXRjaEtleWJpbmQoZXZ0LCBkb3duS2V5KSkge1xuICAgICAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMubW92ZVNlbGVjdGlvbigxKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoL15bYS16QS1aXSQvLnRlc3QoZXZ0LmtleSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsZXR0ZXIgPSBldnQua2V5LnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgbGV0IG1hcmsgPSB0aGlzLm1hcmtzLmZpbmQobSA9PiBtLmxldHRlci50b1VwcGVyQ2FzZSgpID09PSBsZXR0ZXIpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLm1vZGUgPT09ICdzZXQnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghbWFyaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGEgbmV3IG1hcmsgZm9yIHRoaXMgbGV0dGVyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZmlsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ05vIGFjdGl2ZSBmaWxlIHRvIG1hcmsuJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgbWFyayA9IHsgbGV0dGVyLCBmaWxlUGF0aDogZmlsZS5wYXRoIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMub25DaG9vc2VTdWdnZXN0aW9uKG1hcmssIGV2dCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1hcmspIHtcbiAgICAgICAgICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMub25DaG9vc2VTdWdnZXN0aW9uKG1hcmssIGV2dCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5fa2V5SGFuZGxlciwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgb25DbG9zZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2tleUhhbmRsZXIpIHtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5fa2V5SGFuZGxlciwgdHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLl9rZXlIYW5kbGVyID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyLm9uQ2xvc2UoKTtcbiAgICB9XG5cbiAgICBtb3ZlU2VsZWN0aW9uKGRlbHRhOiBudW1iZXIpIHtcbiAgICAgICAgLy8gTW92ZSB0aGUgc2VsZWN0aW9uIHVwIG9yIGRvd24gYnkgZGVsdGFcbiAgICAgICAgLy8gdGhpcy5jaG9vc2VyIGlzIFN1Z2dlc3RNb2RhbCdzIGludGVybmFsIGNob29zZXJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBjb25zdCBjaG9vc2VyID0gdGhpcy5jaG9vc2VyO1xuICAgICAgICBpZiAoIWNob29zZXIpIHJldHVybjtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBsZXQgaWR4ID0gY2hvb3Nlci5zZWxlY3RlZEl0ZW07XG4gICAgICAgIGlmICh0eXBlb2YgaWR4ICE9PSAnbnVtYmVyJykgaWR4ID0gMDtcbiAgICAgICAgY29uc3QgbWF4ID0gY2hvb3Nlci52YWx1ZXMubGVuZ3RoO1xuICAgICAgICBsZXQgbmV4dCA9IGlkeCArIGRlbHRhO1xuICAgICAgICBpZiAobmV4dCA8IDApIG5leHQgPSBtYXggLSAxO1xuICAgICAgICBpZiAobmV4dCA+PSBtYXgpIG5leHQgPSAwO1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGNob29zZXIuc2V0U2VsZWN0ZWRJdGVtKG5leHQsIHRydWUpO1xuICAgIH1cblxuICAgIG1hdGNoS2V5YmluZChldnQ6IEtleWJvYXJkRXZlbnQsIGtleWJpbmQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICAvLyBQYXJzZSBrZXliaW5kIHN0cmluZyBsaWtlICdjdHJsK3NoaWZ0K3AnLCAnY3RybCtuJywgJ2FsdCtkb3duJywgZXRjLlxuICAgICAgICBjb25zdCBwYXJ0cyA9IGtleWJpbmQuc3BsaXQoJysnKS5tYXAocCA9PiBwLnRyaW0oKS50b0xvd2VyQ2FzZSgpKTtcbiAgICAgICAgbGV0IHJlcXVpcmVkID0geyBjdHJsOiBmYWxzZSwgc2hpZnQ6IGZhbHNlLCBhbHQ6IGZhbHNlLCBtZXRhOiBmYWxzZSwga2V5OiAnJyB9O1xuICAgICAgICBmb3IgKGNvbnN0IHBhcnQgb2YgcGFydHMpIHtcbiAgICAgICAgICAgIGlmIChwYXJ0ID09PSAnY3RybCcpIHJlcXVpcmVkLmN0cmwgPSB0cnVlO1xuICAgICAgICAgICAgZWxzZSBpZiAocGFydCA9PT0gJ3NoaWZ0JykgcmVxdWlyZWQuc2hpZnQgPSB0cnVlO1xuICAgICAgICAgICAgZWxzZSBpZiAocGFydCA9PT0gJ2FsdCcpIHJlcXVpcmVkLmFsdCA9IHRydWU7XG4gICAgICAgICAgICBlbHNlIGlmIChwYXJ0ID09PSAnbWV0YScgfHwgcGFydCA9PT0gJ2NtZCcgfHwgcGFydCA9PT0gJ3dpbicpIHJlcXVpcmVkLm1ldGEgPSB0cnVlO1xuICAgICAgICAgICAgZWxzZSByZXF1aXJlZC5rZXkgPSBwYXJ0O1xuICAgICAgICB9XG4gICAgICAgIC8vIENoZWNrIG1vZGlmaWVyc1xuICAgICAgICBpZiAoZXZ0LmN0cmxLZXkgIT09IHJlcXVpcmVkLmN0cmwpIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKGV2dC5zaGlmdEtleSAhPT0gcmVxdWlyZWQuc2hpZnQpIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKGV2dC5hbHRLZXkgIT09IHJlcXVpcmVkLmFsdCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoZXZ0Lm1ldGFLZXkgIT09IHJlcXVpcmVkLm1ldGEpIHJldHVybiBmYWxzZTtcbiAgICAgICAgLy8gQ2hlY2sga2V5IChjYXNlLWluc2Vuc2l0aXZlKVxuICAgICAgICByZXR1cm4gZXZ0LmtleS50b0xvd2VyQ2FzZSgpID09PSByZXF1aXJlZC5rZXk7XG4gICAgfVxuXG59IiwgImltcG9ydCBWaW1NYXJrc0ltcGwgZnJvbSAnLi9tYWluJztcclxuaW1wb3J0IHsgTWFyayB9IGZyb20gJy4vdHlwZXMnO1xyXG5pbXBvcnQgeyBNYXJrTGlzdE1vZGFsIH0gZnJvbSAnLi91aS9NYXJrTGlzdE1vZGFsJztcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZXRHbG9iYWxNYXJrKHBsdWdpbjogVmltTWFya3NJbXBsKSB7XHJcbiAgICBuZXcgTWFya0xpc3RNb2RhbChwbHVnaW4uYXBwLCBwbHVnaW4sICdzZXQnKS5vcGVuKCk7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnb1RvR2xvYmFsTWFyayhwbHVnaW46IFZpbU1hcmtzSW1wbCkge1xyXG4gICAgbmV3IE1hcmtMaXN0TW9kYWwocGx1Z2luLmFwcCwgcGx1Z2luLCAnZ290bycpLm9wZW4oKTtcclxufSIsICJpbXBvcnQgeyBBcHAsIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgVmltTWFya3NJbXBsIGZyb20gJy4uL21haW4nO1xuaW1wb3J0IHsgU2V0dGluZ3MgfSBmcm9tICcuLi90eXBlcy9pbmRleCc7XG5cbmV4cG9ydCBjbGFzcyBTZXR0aW5nc1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuICAgIHBsdWdpbjogVmltTWFya3NJbXBsO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogVmltTWFya3NJbXBsKSB7XG4gICAgICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgfVxuXG4gICAgZGlzcGxheSgpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGFpbmVyRWwuZW1wdHkoKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdIaWRlIG1hcmsgbGlzdCcpXG4gICAgICAgICAgICAuc2V0RGVzYygnSGlkZSB0aGUgZ2xvYmFsIG1hcmsgbGlzdCBmb3IgYm90aCBjb21tYW5kcyAoZm9yIGZhc3QgaW5wdXQsIG5vIGZsaWNrZXIpLicpXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlkZU1hcmtMaXN0RHVyaW5nSW5wdXQpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWRlTWFya0xpc3REdXJpbmdJbnB1dCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgLy8gQWRkIGtleWJvYXJkIHNob3J0Y3V0IHNldHRpbmdzXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ01hcmsgTGlzdCBOYXZpZ2F0aW9uIFNob3J0Y3V0cycgfSk7XG4gICAgICAgIHRoaXMuY3JlYXRlU2hvcnRjdXRTZXR0aW5nKGNvbnRhaW5lckVsLCAnVXAnLCAnY3RybCtQJywgJ1Nob3J0Y3V0IGZvciBtb3ZpbmcgdXAgaW4gdGhlIG1hcmsgbGlzdCcsICdtYXJrTGlzdFVwJyk7XG4gICAgICAgIHRoaXMuY3JlYXRlU2hvcnRjdXRTZXR0aW5nKGNvbnRhaW5lckVsLCAnRG93bicsICdjdHJsK04nLCAnU2hvcnRjdXQgZm9yIG1vdmluZyBkb3duIGluIHRoZSBtYXJrIGxpc3QnLCAnbWFya0xpc3REb3duJyk7XG4gICAgICAgIHRoaXMuY3JlYXRlU2hvcnRjdXRTZXR0aW5nKGNvbnRhaW5lckVsLCAnU2VsZWN0JywgJ0VudGVyJywgJ1Nob3J0Y3V0IGZvciBzZWxlY3RpbmcgYSBtYXJrJywgJ21hcmtMaXN0U2VsZWN0Jyk7XG4gICAgfVxuXG4gICAgY3JlYXRlU2hvcnRjdXRTZXR0aW5nKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCwgbmFtZTogc3RyaW5nLCBkZWZhdWx0VmFsdWU6IHN0cmluZywgZGVzYzogc3RyaW5nLCBrZXk6IGtleW9mIFNldHRpbmdzKSB7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUobmFtZSlcbiAgICAgICAgICAgIC5zZXREZXNjKGRlc2MpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUoKHRoaXMucGx1Z2luLnNldHRpbmdzIGFzIGFueSlba2V5XSB8fCBkZWZhdWx0VmFsdWUpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAodGhpcy5wbHVnaW4uc2V0dGluZ3MgYXMgYW55KVtrZXldID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICB9XG59IiwgImltcG9ydCBWaW1NYXJrc0ltcGwgZnJvbSAnLi4vbWFpbic7XHJcbmltcG9ydCB7IFNldHRpbmdzLCBNYXJrIH0gZnJvbSAnLi4vdHlwZXMvaW5kZXgnO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvYWRTZXR0aW5ncyhwbHVnaW46IFZpbU1hcmtzSW1wbCk6IFByb21pc2U8U2V0dGluZ3M+IHtcclxuICAgIHJldHVybiAoYXdhaXQgcGx1Z2luLmxvYWREYXRhKCkpPy5zZXR0aW5ncyB8fCB7IGhpZGVNYXJrTGlzdER1cmluZ0lucHV0OiBmYWxzZSB9O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2F2ZVNldHRpbmdzKHBsdWdpbjogVmltTWFya3NJbXBsLCBzZXR0aW5nczogU2V0dGluZ3MpIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBwbHVnaW4ubG9hZERhdGEoKSB8fCB7fTtcclxuICAgIGRhdGEuc2V0dGluZ3MgPSBzZXR0aW5ncztcclxuICAgIGF3YWl0IHBsdWdpbi5zYXZlRGF0YShkYXRhKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvYWRNYXJrcyhwbHVnaW46IFZpbU1hcmtzSW1wbCk6IFByb21pc2U8TWFya1tdPiB7XHJcbiAgICByZXR1cm4gKGF3YWl0IHBsdWdpbi5sb2FkRGF0YSgpKT8ubWFya3MgfHwgW107XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzYXZlTWFya3MocGx1Z2luOiBWaW1NYXJrc0ltcGwsIG1hcmtzOiBNYXJrW10pIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBwbHVnaW4ubG9hZERhdGEoKSB8fCB7fTtcclxuICAgIGRhdGEubWFya3MgPSBtYXJrcztcclxuICAgIGF3YWl0IHBsdWdpbi5zYXZlRGF0YShkYXRhKTtcclxufSJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFBQUEsbUJBQXVCOzs7QUNBdkIsc0JBQStEO0FBTXhELElBQU0sZ0JBQU4sY0FBNEIsNkJBQW1CO0FBQUEsRUFNbEQsWUFBWSxLQUFVLFFBQXNCLE1BQVk7QUFDcEQsVUFBTSxHQUFHO0FBQ1QsU0FBSyxTQUFTO0FBQ2QsU0FBSyxPQUFPO0FBQ1osU0FBSyxRQUFRLE9BQU87QUFDcEIsU0FBSyxlQUFlLEtBQUssU0FBUyxRQUFRLHlCQUF5Qix3QkFBd0I7QUFBQSxFQUMvRjtBQUFBLEVBRUEsZUFBZSxPQUF1QjtBQUVsQyxXQUFPLEtBQUs7QUFBQSxFQUNoQjtBQUFBLEVBRUEsaUJBQWlCLE1BQVksSUFBaUI7QUFDMUMsT0FBRyxTQUFTLE9BQU8sRUFBRSxNQUFNLEdBQUcsS0FBSyxXQUFXLEtBQUssV0FBVyxDQUFDO0FBRS9ELFFBQUksV0FBVyxLQUFLLEtBQUssTUFBTSxHQUFHO0FBQzlCLFNBQUcs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QixHQUFHLEtBQUssWUFBWSxFQUMzRCxTQUFTLE9BQU8sVUFBVTtBQUN2QixNQUFDLEtBQUssT0FBTyxTQUFpQixHQUFHLElBQUk7QUFDckMsWUFBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLElBQ25DLENBQUMsQ0FBQztBQUFBLEVBQ2Q7QUFDSjs7O0FDekNBLGVBQXNCLGFBQWEsUUFBeUM7QUFINUU7QUFJSSxXQUFRLFdBQU0sT0FBTyxTQUFTLE1BQXRCLG1CQUEwQixhQUFZLEVBQUUseUJBQXlCLE1BQU07QUFDbkY7QUFFQSxlQUFzQixhQUFhLFFBQXNCLFVBQW9CO0FBQ3pFLFFBQU0sT0FBTyxNQUFNLE9BQU8sU0FBUyxLQUFLLENBQUM7QUFDekMsT0FBSyxXQUFXO0FBQ2hCLFFBQU0sT0FBTyxTQUFTLElBQUk7QUFDOUI7QUFFQSxlQUFzQixVQUFVLFFBQXVDO0FBYnZFO0FBY0ksV0FBUSxXQUFNLE9BQU8sU0FBUyxNQUF0QixtQkFBMEIsVUFBUyxDQUFDO0FBQ2hEO0FBRUEsZUFBc0IsVUFBVSxRQUFzQixPQUFlO0FBQ2pFLFFBQU0sT0FBTyxNQUFNLE9BQU8sU0FBUyxLQUFLLENBQUM7QUFDekMsT0FBSyxRQUFRO0FBQ2IsUUFBTSxPQUFPLFNBQVMsSUFBSTtBQUM5Qjs7O0FKZEEsSUFBcUIsZUFBckIsY0FBMEMsd0JBQU87QUFBQSxFQUFqRDtBQUFBO0FBRUksaUJBQWdCLENBQUM7QUFBQTtBQUFBLEVBRWpCLE1BQU0sU0FBUztBQUNYLFNBQUssV0FBVyxNQUFNLGFBQWEsSUFBSTtBQUN2QyxTQUFLLFFBQVEsTUFBTSxVQUFVLElBQUk7QUFFakMsU0FBSyxXQUFXO0FBQUEsTUFDWixJQUFJO0FBQUEsTUFDSixNQUFNO0FBQUEsTUFDTixVQUFVLE1BQU0sY0FBYyxJQUFJO0FBQUEsSUFDdEMsQ0FBQztBQUVELFNBQUssV0FBVztBQUFBLE1BQ1osSUFBSTtBQUFBLE1BQ0osTUFBTTtBQUFBLE1BQ04sVUFBVSxNQUFNLGVBQWUsSUFBSTtBQUFBLElBQ3ZDLENBQUM7QUFFRCxTQUFLLGNBQWMsSUFBSSxZQUFZLEtBQUssS0FBSyxJQUFJLENBQUM7QUFFbEQsU0FBSyxjQUFjLFlBQVkscUJBQXFCLFlBQVk7QUFDNUQsWUFBTSxRQUFRLElBQUksY0FBYyxLQUFLLEtBQUssTUFBTSxNQUFNO0FBQ3RELFlBQU0sS0FBSztBQUFBLElBQ2YsQ0FBQztBQUVELFlBQVEsSUFBSSw0QkFBNEI7QUFBQSxFQUM1QztBQUFBLEVBRUEsTUFBTSxlQUFlO0FBQ2pCLFVBQU0sYUFBYSxNQUFNLEtBQUssUUFBUTtBQUFBLEVBQzFDO0FBQUEsRUFFQSxNQUFNLFVBQVUsT0FBZTtBQUMzQixTQUFLLFFBQVE7QUFDYixVQUFNLFVBQVUsTUFBTSxLQUFLO0FBQUEsRUFDL0I7QUFBQSxFQUVBLFdBQVc7QUFDUCxZQUFRLElBQUksOEJBQThCO0FBQUEsRUFFOUM7QUFDSjsiLAogICJuYW1lcyI6IFsiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiJdCn0K
